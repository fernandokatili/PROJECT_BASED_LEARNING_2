#Membuat Folder
nandokatili@nandokatili-VirtualBox:~$ mkdir project_2
nandokatili@nandokatili-VirtualBox:~/project_2$ mkdir source_file backup logs

#Menampilkan
nandokatili@nandokatili-VirtualBox:~/project_2$ ls

#Membuat File Menggunakan Echo
nandokatili@nandokatili-VirtualBox:~/project_2$ cd source_file
nandokatili@nandokatili-VirtualBox:~/project_2/source_file$ echo "engineering" > engineering.txt
nandokatili@nandokatili-VirtualBox:~/project_2/source_file$ echo "marketing" > marketing.pdf
nandokatili@nandokatili-VirtualBox:~/project_2/source_file$ ls
nandokatili@nandokatili-VirtualBox:~/project_2/source_file$ cd ..

#Buat Script Di Nano
nandokatili@nandokatili-VirtualBox:~/project_2$ nano backup.sh



#Di dalam Nano

#!/bin/bash

#KONFIGURASI
SOURCE_DIR="source_file"
BACKUP_DIR="backup"
LOG_FILE="logs/backup.log"
TIMESTAMP=$(date "+%Y-%m-%d_%H-%M-%S")
BACKUP_NAME="backup_$TIMESTAMP.tar.gz"

echo "Backup dijalankan pada $TIMESTAMP" >> $LOG_FILE

#1.Cari File Berdasarkan Ekstensi & Tanggal Modifikasi
FILES=$(find "$SOURCE_DIR" -name "*.txt" -o -name "*.pdf" -mtime -1)

if [ -z "$FILES" ]; then
    echo "Tidak ada file yang memenuhi kriteria." >> $LOG_FILE
    echo "Backup gagal: tidak ada file ditemukan."
    exit 1
fi

#2.Kompres File
tar -czf "$BACKUP_DIR/$BACKUP_NAME" $FILES 2>> $LOG_FILE

#3.Memindahkan File Hasil Kompres ke Folder Khusus
echo "File berhasil dikompres ke folder $BACKUP_DIR." >> "$LOG_FILE"

#4.Mencatat Aktifitas ke Log
echo "$(date) BERHASIL : Backup tersimpan sebagai $BACKUP_DIR/$BACKUP_NAME" >> "$LOG_FILE"

#Mengecek Apakah Proses Backup Berhasil Apa Tidak
echo "Backup berhasil!"
echo "file backup: $BACKUP_NAME"
echo "Lokasi penyimpanan: $BACKUP_DIR/"
exit 1
fi


#Tambah Izin Eksekusi
nandokatili@nandokatili-VirtualBox:~/project_2$ chmod +x backup.sh

#Menjalankan Nano
nandokatili@nandokatili-VirtualBox:~/project_2$ ./backup.sh

#Menampilkan
nandokatili@nandokatili-VirtualBox:~/project_2$ cat logs/backup.log
